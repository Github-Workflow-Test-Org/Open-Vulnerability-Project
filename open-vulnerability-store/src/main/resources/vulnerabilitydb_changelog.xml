<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-latest.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">
    <changeSet author="generated" id="1682936234332-1">
        <createTable tableName="AFFECTED">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_5"/>
            </column>
            <column name="CPE" type="VARCHAR(2000)"/>
            <column name="ECOSYSTEM" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(1000)"/>
            <column name="PURL" type="VARCHAR(2000)"/>
            <column name="DATABASE_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-2">
        <createTable tableName="CONTACT">
            <column name="CREDIT_ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="CONTACT" type="VARCHAR(1000)"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-3">
        <createTable tableName="CREDIT">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_7"/>
            </column>
            <column name="NAME" type="VARCHAR(1000)"/>
            <column name="DATABASE_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-4">
        <createTable tableName="CWE">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_1"/>
            </column>
            <column name="CWE_ID" type="VARCHAR(255)"/>
            <column name="DESCRIPTION" type="VARCHAR(1000000000)"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="DATABASE_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-5">
        <createTable tableName="DB_PROPERTIES">
            <column name="PROP_KEY" type="VARCHAR(255)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_7D"/>
            </column>
            <column name="PREP_VALUE" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-6">
        <createTable tableName="EPSS">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_2"/>
            </column>
            <column name="CVE" type="VARCHAR(255)"/>
            <column name="EPSS" type="numeric(38, 2)"/>
            <column name="PERCENTILE" type="numeric(38, 2)"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-7">
        <createTable tableName="IDENTIFIERS">
            <column name="DATABASE_ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="IDENTIFIER" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-8">
        <createTable tableName="KEV">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_12"/>
            </column>
            <column name="CVE_ID" type="VARCHAR(255)"/>
            <column name="DATE_ADDED" type="TIMESTAMP"/>
            <column name="DUE_DATE" type="TIMESTAMP"/>
            <column name="NOTES" type="VARCHAR(1000000000)"/>
            <column name="PRODUCT" type="VARCHAR(2000)"/>
            <column name="REQUIRED_ACTION" type="VARCHAR(1000000000)"/>
            <column name="SHORT_DESCRIPTION" type="VARCHAR(1000000000)"/>
            <column name="VENDOR_PRODUCT" type="VARCHAR(2000)"/>
            <column name="VULNERABILITY_NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-9">
        <createTable tableName="RANGE">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_4"/>
            </column>
            <column name="REPO" type="VARCHAR(1000)"/>
            <column name="TYPE" type="VARCHAR(255)"/>
            <column name="AFFECTED_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-10">
        <createTable tableName="REFERENCE">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_6"/>
            </column>
            <column name="TAGS" type="VARCHAR(255)"/>
            <column name="URL" type="VARCHAR(1000)"/>
            <column name="DATABASE_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-11">
        <createTable tableName="RELATED">
            <column name="DATABASE_ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="RELATED" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-12">
        <createTable tableName="SEVERITY">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_8"/>
            </column>
            <column name="NUMERIC_SCORE" type="numeric(38, 2)"/>
            <column name="SCORE" type="VARCHAR(255)"/>
            <column name="SEVERITY" type="VARCHAR(255)"/>
            <column name="SOURCE" type="VARCHAR(255)"/>
            <column name="TYPE" type="VARCHAR(255)"/>
            <column name="DATABASE_ID" type="UUID"/>
            <column name="AFFECTED_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-13">
        <createTable tableName="SOURCE">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_9"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="WITHDRAWN" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="DATABASE_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-14">
        <createTable tableName="TYPE">
            <column name="CREDIT_ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="TYPE" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-15">
        <createTable tableName="VERSIONS">
            <column name="AFFECTED_ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="VERSIONS" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-16">
        <createTable tableName="VERSION_RANGE">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_3"/>
            </column>
            <column name="BEGIN_VERSION" type="VARCHAR(255)"/>
            <column name="END_VERSION" type="VARCHAR(255)"/>
            <column name="RANGE_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-17">
        <createTable tableName="VULNERABILITY">
            <column name="DATABASE_ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_70"/>
            </column>
            <column name="DETAILS" type="VARCHAR(1000000000)"/>
            <column name="MODIFIED" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="PUBLISHED" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="SUMMARY" type="VARCHAR(1000000000)"/>
            <column name="WITHDRAWN" type="TIMESTAMP WITH TIME ZONE"/>
        </createTable>
    </changeSet>
    <changeSet author="generated" id="1682936234332-18">
        <createIndex indexName="FK24FJIKJSAVDPJN7XWSMG02B1A_INDEX_2" tableName="TYPE">
            <column name="CREDIT_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-19">
        <createIndex indexName="FK4C6YKND816MLCH50S0O3DCYSY_INDEX_1" tableName="CWE">
            <column name="DATABASE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-20">
        <createIndex indexName="FK545B9H1461G94D4EOB1DDNDS_INDEX_8" tableName="SEVERITY">
            <column name="AFFECTED_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-21">
        <createIndex indexName="FK66R0YLK2VI6NLYGQEYX2J5XG_INDEX_B" tableName="VERSIONS">
            <column name="AFFECTED_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-22">
        <createIndex indexName="FK75HEG8XU7NEQ4OF0P0SENY6PP_INDEX_7" tableName="CREDIT">
            <column name="DATABASE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-23">
        <createIndex indexName="FKC083WRKXO5V78GTLI55TP2WQP_INDEX_6" tableName="RELATED">
            <column name="DATABASE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-24">
        <createIndex indexName="FKENEXWODXU4W09T1PA2GVDIBI3_INDEX_6" tableName="REFERENCE">
            <column name="DATABASE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-25">
        <createIndex indexName="FKGI7TCCEP46SDLCJNTETUS9D27_INDEX_5" tableName="AFFECTED">
            <column name="DATABASE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-26">
        <createIndex indexName="FKI5MUEUS6HYPQHQ9JC4896ML0H_INDEX_D" tableName="IDENTIFIERS">
            <column name="DATABASE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-27">
        <createIndex indexName="FKKLNPWQ6SCDHM708YOQRNQKXPR_INDEX_8" tableName="SEVERITY">
            <column name="DATABASE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-28">
        <createIndex indexName="FKL6T00MTNXRCV8LGT0Q56YIY7X_INDEX_6" tableName="CONTACT">
            <column name="CREDIT_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-29">
        <createIndex indexName="FKLJE4UCEG0CWMWIQOOT1P76463_INDEX_4" tableName="RANGE">
            <column name="AFFECTED_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-30">
        <createIndex indexName="FKO1ATCUVFHJSP0507FIK68ERN_INDEX_3" tableName="VERSION_RANGE">
            <column name="RANGE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-31">
        <createIndex indexName="FKRPRDSOGNMVM159G7DB0M7C2MY_INDEX_9" tableName="SOURCE">
            <column name="DATABASE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-32">
        <createIndex indexName="IDX_IDENTIFIER" tableName="IDENTIFIERS">
            <column name="IDENTIFIER"/>
        </createIndex>
    </changeSet>
    <changeSet author="generated" id="1682936234332-33">
        <addForeignKeyConstraint baseColumnNames="CREDIT_ID" baseTableName="TYPE" constraintName="FK24FJIKJSAVDPJN7XWSMG02B1A" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="CREDIT" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-34">
        <addForeignKeyConstraint baseColumnNames="DATABASE_ID" baseTableName="CWE" constraintName="FK4C6YKND816MLCH50S0O3DCYSY" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="DATABASE_ID" referencedTableName="VULNERABILITY" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-35">
        <addForeignKeyConstraint baseColumnNames="AFFECTED_ID" baseTableName="SEVERITY" constraintName="FK545B9H1461G94D4EOB1DDNDS" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="AFFECTED" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-36">
        <addForeignKeyConstraint baseColumnNames="AFFECTED_ID" baseTableName="VERSIONS" constraintName="FK66R0YLK2VI6NLYGQEYX2J5XG" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="AFFECTED" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-37">
        <addForeignKeyConstraint baseColumnNames="DATABASE_ID" baseTableName="CREDIT" constraintName="FK75HEG8XU7NEQ4OF0P0SENY6PP" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="DATABASE_ID" referencedTableName="VULNERABILITY" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-38">
        <addForeignKeyConstraint baseColumnNames="DATABASE_ID" baseTableName="RELATED" constraintName="FKC083WRKXO5V78GTLI55TP2WQP" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="DATABASE_ID" referencedTableName="VULNERABILITY" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-39">
        <addForeignKeyConstraint baseColumnNames="DATABASE_ID" baseTableName="REFERENCE" constraintName="FKENEXWODXU4W09T1PA2GVDIBI3" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="DATABASE_ID" referencedTableName="VULNERABILITY" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-40">
        <addForeignKeyConstraint baseColumnNames="DATABASE_ID" baseTableName="AFFECTED" constraintName="FKGI7TCCEP46SDLCJNTETUS9D27" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="DATABASE_ID" referencedTableName="VULNERABILITY" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-41">
        <addForeignKeyConstraint baseColumnNames="DATABASE_ID" baseTableName="IDENTIFIERS" constraintName="FKI5MUEUS6HYPQHQ9JC4896ML0H" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="DATABASE_ID" referencedTableName="VULNERABILITY" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-42">
        <addForeignKeyConstraint baseColumnNames="DATABASE_ID" baseTableName="SEVERITY" constraintName="FKKLNPWQ6SCDHM708YOQRNQKXPR" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="DATABASE_ID" referencedTableName="VULNERABILITY" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-43">
        <addForeignKeyConstraint baseColumnNames="CREDIT_ID" baseTableName="CONTACT" constraintName="FKL6T00MTNXRCV8LGT0Q56YIY7X" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="CREDIT" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-44">
        <addForeignKeyConstraint baseColumnNames="AFFECTED_ID" baseTableName="RANGE" constraintName="FKLJE4UCEG0CWMWIQOOT1P76463" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="AFFECTED" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-45">
        <addForeignKeyConstraint baseColumnNames="RANGE_ID" baseTableName="VERSION_RANGE" constraintName="FKO1ATCUVFHJSP0507FIK68ERN" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="RANGE" validate="true"/>
    </changeSet>
    <changeSet author="generated" id="1682936234332-46">
        <addForeignKeyConstraint baseColumnNames="DATABASE_ID" baseTableName="SOURCE" constraintName="FKRPRDSOGNMVM159G7DB0M7C2MY" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="DATABASE_ID" referencedTableName="VULNERABILITY" validate="true"/>
    </changeSet>
</databaseChangeLog>
